# ğŸ¨ Architecture Visual Guide

## ğŸ“ Layer Diagram

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    FRONTEND (React App)                       â•‘
â•‘                   Id_Card_Frontend/src/                       â•‘
â•‘   Components â€¢ Pages â€¢ Services â€¢ Hooks â€¢ Context             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            â”‚
                            â”‚ window.electron.* APIs
                            â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    PRELOAD BRIDGE                             â•‘
â•‘                      preload.js                               â•‘
â•‘   Secure IPC exposure via contextBridge                       â•‘
â•‘   â€¢ auth API    â€¢ users API     â€¢ templates API               â•‘
â•‘   â€¢ fields API  â€¢ backup API    â€¢ developer API               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            â”‚
                            â”‚ ipcRenderer.invoke()
                            â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    HANDLER LAYER                              â•‘
â•‘                   src/handlers/                               â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â•‘
â•‘   â”‚   auth     â”‚  fields  â”‚templates â”‚  users   â”‚            â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â•‘
â•‘   â”‚  backup    â”‚  print   â”‚  system  â”‚developer â”‚            â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â•‘
â•‘   â€¢ Receives IPC requests                                     â•‘
â•‘   â€¢ Applies middleware                                        â•‘
â•‘   â€¢ Calls services                                            â•‘
â•‘   â€¢ Returns formatted responses                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            â”‚
                            â”‚ Service method calls
                            â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   MIDDLEWARE LAYER                            â•‘
â•‘                  src/middleware/                              â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â•‘
â•‘   â”‚  Rate Limiting  â”‚  Validation  â”‚  Error Handlingâ”‚         â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â•‘
â•‘   â€¢ Rate limiting enforcement                                 â•‘
â•‘   â€¢ Input validation                                          â•‘
â•‘   â€¢ Centralized error handling                                â•‘
â•‘   â€¢ Logging integration                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            â”‚
                            â”‚ Business logic execution
                            â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    SERVICE LAYER                              â•‘
â•‘                   src/services/                               â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â•‘
â•‘   â”‚   auth     â”‚  fields  â”‚templates â”‚  users   â”‚             â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â•‘
â•‘   â”‚  backup    â”‚developer â”‚          â”‚          â”‚             â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â•‘
â•‘   â€¢ Business logic implementation                             â•‘
â•‘   â€¢ Workflow orchestration                                    â•‘
â•‘   â€¢ Transaction management                                    â•‘
â•‘   â€¢ Calls repositories                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            â”‚
                            â”‚ Repository method calls
                            â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  REPOSITORY LAYER                             â•‘
â•‘                 src/repositories/                             â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â•‘
â•‘   â”‚   auth     â”‚  fields  â”‚templates â”‚  users   â”‚             â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â•‘
â•‘   â”‚            database.js (connection)         â”‚             â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â•‘
â•‘   â€¢ CRUD operations                                           â•‘
â•‘   â€¢ SQL query execution                                       â•‘
â•‘   â€¢ Data transformation                                       â•‘
â•‘   â€¢ Direct database access                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            â”‚
                            â”‚ SQL queries
                            â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      DATABASE                                 â•‘
â•‘               SQLite (better-sqlite3)                         â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â•‘
â•‘   â”‚   auth   â”‚  users   â”‚templates â”‚  fields  â”‚               â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”„ Request Flow Example: User Login

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. USER ACTION                                              â”‚
â”‚    User clicks "Login" button in React app                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. FRONTEND CALL                                            â”‚
â”‚    const result = await window.electron.auth.login(         â”‚
â”‚        username, password                                   â”‚
â”‚    );                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. PRELOAD BRIDGE                                           â”‚
â”‚    ipcRenderer.invoke('auth:login', {                       â”‚
â”‚        username, password                                   â”‚
â”‚    })                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. HANDLER RECEIVES REQUEST                                 â”‚
â”‚    auth.handler.js â†’ handleLogin()                          â”‚
â”‚    â”œâ”€ Rate limiting check âœ“                                 â”‚
â”‚    â”œâ”€ Input validation âœ“                                    â”‚
â”‚    â””â”€ Error handling wrapper âœ“                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. MIDDLEWARE PROCESSING                                    â”‚
â”‚    validation.middleware.js                                 â”‚
â”‚    â”œâ”€ validateUsername(username) â†’ âœ“                        â”‚
â”‚    â””â”€ validatePassword(password) â†’ âœ“                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. SERVICE LAYER                                            â”‚
â”‚    auth.service.js â†’ login()                                â”‚
â”‚    â”œâ”€ Check dev users (if enabled)                          â”‚
â”‚    â”œâ”€ Call authRepository.findByUsername()                  â”‚
â”‚    â””â”€ Call authRepository.verifyPassword()                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. REPOSITORY LAYER                                         â”‚
â”‚    auth.repository.js                                       â”‚
â”‚    â”œâ”€ Execute SQL: SELECT * FROM auth WHERE username = ?    â”‚
â”‚    â””â”€ Verify bcrypt hash                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. DATABASE                                                 â”‚
â”‚    SQLite executes query and returns user record            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. RESPONSE FLOWS BACK                                      â”‚
â”‚    Repository â†’ Service â†’ Handler â†’ Preload â†’ Frontend      â”‚
â”‚    { success: true, data: { id, username } }                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ File Organization Map

```
Desk_App/
â”‚
â”œâ”€â”€ ğŸ“„ Entry Points
â”‚   â”œâ”€â”€ main.js (60 lines) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º App initialization
â”‚   â”œâ”€â”€ preload.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º IPC bridge
â”‚   â””â”€â”€ package.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Dependencies
â”‚
â”œâ”€â”€ ğŸ“š Documentation
â”‚   â”œâ”€â”€ REFACTORING-SUMMARY.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Overview
â”‚   â”œâ”€â”€ QUICK-START.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Getting started
â”‚   â”œâ”€â”€ ARCHITECTURE.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Deep dive
â”‚   â”œâ”€â”€ COMPARISON.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Before/after
â”‚   â””â”€â”€ MIGRATION-GUIDE.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Migration steps
â”‚
â”œâ”€â”€ ğŸ—ï¸ New Architecture (src/)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“¡ handlers/ (IPC Layer)
â”‚   â”‚   â”œâ”€â”€ auth.handler.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Login, auth
â”‚   â”‚   â”œâ”€â”€ users.handler.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º User CRUD
â”‚   â”‚   â”œâ”€â”€ templates.handler.js â”€â”€â”€â”€â”€â”€â”€â”€â–º Template CRUD
â”‚   â”‚   â”œâ”€â”€ fields.handler.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Fields CRUD
â”‚   â”‚   â”œâ”€â”€ backup.handler.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Backup/restore
â”‚   â”‚   â”œâ”€â”€ print.handler.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Print operations
â”‚   â”‚   â”œâ”€â”€ system.handler.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º System ops
â”‚   â”‚   â”œâ”€â”€ developer.handler.js â”€â”€â”€â”€â”€â”€â”€â”€â–º Dev panel
â”‚   â”‚   â””â”€â”€ index.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Register all
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¯ services/ (Business Logic)
â”‚   â”‚   â”œâ”€â”€ auth.service.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Auth logic
â”‚   â”‚   â”œâ”€â”€ users.service.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º User logic
â”‚   â”‚   â”œâ”€â”€ templates.service.js â”€â”€â”€â”€â”€â”€â”€â”€â–º Template logic
â”‚   â”‚   â”œâ”€â”€ fields.service.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Fields logic
â”‚   â”‚   â”œâ”€â”€ backup.service.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Backup logic
â”‚   â”‚   â””â”€â”€ developer.service.js â”€â”€â”€â”€â”€â”€â”€â”€â–º Dev operations
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ’¾ repositories/ (Data Access)
â”‚   â”‚   â”œâ”€â”€ database.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Connection
â”‚   â”‚   â”œâ”€â”€ auth.repository.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Auth queries
â”‚   â”‚   â”œâ”€â”€ users.repository.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º User queries
â”‚   â”‚   â”œâ”€â”€ templates.repository.js â”€â”€â”€â”€â”€â–º Template queries
â”‚   â”‚   â”œâ”€â”€ fields.repository.js â”€â”€â”€â”€â”€â”€â”€â”€â–º Fields queries
â”‚   â”‚   â””â”€â”€ init.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º DB init
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”§ middleware/ (Cross-Cutting)
â”‚   â”‚   â”œâ”€â”€ rateLimit.middleware.js â”€â”€â”€â”€â”€â–º Rate limiting
â”‚   â”‚   â”œâ”€â”€ validation.middleware.js â”€â”€â”€â”€â–º Validation
â”‚   â”‚   â”œâ”€â”€ errorHandler.middleware.js â”€â”€â–º Error handling
â”‚   â”‚   â””â”€â”€ index.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Export all
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ› ï¸ utils/ (Utilities)
â”‚   â”‚   â”œâ”€â”€ logger.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Logging
â”‚   â”‚   â”œâ”€â”€ response.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Response format
â”‚   â”‚   â””â”€â”€ constants.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Constants
â”‚   â”‚
â”‚   â””â”€â”€ ğŸªŸ window/ (Window Management)
â”‚       â””â”€â”€ mainWindow.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Main window
â”‚
â””â”€â”€ âš™ï¸ Legacy Files (Still Used)
    â”œâ”€â”€ Database.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Legacy DB manager
    â”œâ”€â”€ ValidationService.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Validation rules
    â”œâ”€â”€ PasswordService.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Password hashing
    â”œâ”€â”€ BackupManager.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Backup system
    â”œâ”€â”€ RateLimiter.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Rate limiter
    â””â”€â”€ config.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Configuration
```

---

## ğŸ­ Layer Interaction Patterns

### Pattern 1: Simple CRUD Operation

```
Handler â”€â”€â”€â”€â”€â”€â–º Service â”€â”€â”€â”€â”€â”€â–º Repository â”€â”€â”€â”€â”€â”€â–º Database
   â”‚               â”‚                â”‚                   â”‚
   â”‚ validate      â”‚ business       â”‚ execute           â”‚ return
   â”‚ request       â”‚ logic          â”‚ SQL               â”‚ data
   â”‚               â”‚                â”‚                   â”‚
   â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         formatted response
```

### Pattern 2: Complex Operation with Cleanup

```
Handler â”€â”€â”€â”€â”€â”€â–º Service â”€â”€â”€â”€â”€â”€â–º Multiple Repositories
   â”‚               â”‚                â”œâ”€â–º users.repository
   â”‚               â”‚                â”œâ”€â–º templates.repository
   â”‚               â”‚                â””â”€â–º fields.repository
   â”‚               â”‚                         â”‚
   â”‚               â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚               â”‚ (orchestrate results)
   â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     formatted response
```

### Pattern 3: With Middleware

```
Request
   â”‚
   â–¼
Rate Limiting â”€â”€â”€â”€â–º (check) â”€â”€â”€â”€â–º Continue or Reject
   â”‚
   â–¼
Validation â”€â”€â”€â”€â”€â”€â”€â–º (validate) â”€â”€â–º Continue or Error
   â”‚
   â–¼
Handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º (process) â”€â”€â”€â–º Success Response
   â”‚
   â–¼
Error Handler â”€â”€â”€â”€â–º (wrap) â”€â”€â”€â”€â”€â”€â–º Error Response
```

---

## ğŸ“Š Responsibility Matrix

| Layer          | Responsibilities                                                                                      | NOT Responsible For                                                      |
| -------------- | ----------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| **Handler**    | â€¢ Receive IPC requests<br>â€¢ Apply middleware<br>â€¢ Call services<br>â€¢ Format responses                 | â€¢ Business logic<br>â€¢ Database queries<br>â€¢ Data validation rules        |
| **Middleware** | â€¢ Rate limiting<br>â€¢ Input validation<br>â€¢ Error handling<br>â€¢ Logging                                | â€¢ Business decisions<br>â€¢ Data storage<br>â€¢ Request routing              |
| **Service**    | â€¢ Business logic<br>â€¢ Workflow orchestration<br>â€¢ Transaction management<br>â€¢ Multi-repo coordination | â€¢ IPC communication<br>â€¢ Direct database access<br>â€¢ Response formatting |
| **Repository** | â€¢ CRUD operations<br>â€¢ SQL execution<br>â€¢ Data transformation<br>â€¢ Single table focus                 | â€¢ Business logic<br>â€¢ Multi-table operations<br>â€¢ Validation             |

---

## ğŸ¯ Data Flow Visualization

```
CREATE USER REQUEST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend Form
  â†“ (name, email, age, photo)
Preload
  â†“ ipcRenderer.invoke('users:create', {...})
Handler
  â†“ Middleware: Validate all fields âœ“
Service
  â†“ Business: Check duplicates, prepare data
Repository
  â†“ SQL: INSERT INTO users (...)
Database
  â†“ Returns: { id: 123 }
Repository
  â†‘ Format: { id: 123 }
Service
  â†‘ Log: "User created: john@example.com"
Handler
  â†‘ Response: { success: true, data: { id: 123 } }
Preload
  â†‘ Returns to renderer
Frontend
  â†‘ Shows success message
```

---

## ğŸ” Security Layers

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          FRONTEND (Renderer)                 â•‘
â•‘  â€¢ No Node.js access                         â•‘
â•‘  â€¢ Context isolation enabled                 â•‘
â•‘  â€¢ Sandboxed environment                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                  â”‚
                  â”‚ IPC only
                  â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          PRELOAD (Bridge)                    â•‘
â•‘  â€¢ Controlled API exposure                   â•‘
â•‘  â€¢ No direct electron access to renderer     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                  â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          RATE LIMITING                       â•‘
â•‘  â€¢ Max requests per window                   â•‘
â•‘  â€¢ Per-channel tracking                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                  â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          VALIDATION                          â•‘
â•‘  â€¢ Input sanitization                        â•‘
â•‘  â€¢ Type checking                             â•‘
â•‘  â€¢ Range validation                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                  â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          BUSINESS LOGIC                      â•‘
â•‘  â€¢ Authorization checks                      â•‘
â•‘  â€¢ Business rules                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                  â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          DATABASE                            â•‘
â•‘  â€¢ Prepared statements (SQL injection safe)  â•‘
â•‘  â€¢ Password hashing (bcrypt)                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ“ˆ Scalability Path

```
CURRENT: Monolithic Electron App
    â†“
STEP 1: Layered Architecture (âœ“ DONE)
    â†“
STEP 2: Extract Services (Future)
    â”œâ”€â–º Auth Service
    â”œâ”€â–º User Service
    â”œâ”€â–º Template Service
    â””â”€â–º Fields Service
    â†“
STEP 3: Microservices (If needed)
    â”œâ”€â–º Independent services
    â”œâ”€â–º API Gateway
    â””â”€â–º Shared database or per-service DB
    â†“
STEP 4: Cloud-Ready (Optional)
    â”œâ”€â–º Docker containers
    â”œâ”€â–º Load balancing
    â””â”€â–º Horizontal scaling
```

---

**This visual guide helps understand the architecture at a glance!** ğŸ¨

_For detailed documentation, see [ARCHITECTURE.md](ARCHITECTURE.md)_
